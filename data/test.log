/*C3*/SET SCHEMA PUBLIC
alter table Evenement_Personne drop constraint FK4708D52251470556
alter table Evenement_Personne drop constraint FK4708D52299358C99
drop table Book if exists
drop table Evenement if exists
drop table Evenement_Personne if exists
drop table Personne if exists
drop table Voiture if exists
create table Book (isbn integer generated by default as identity (start with 1), author varchar(255), note integer not null, title varchar(255), primary key (isbn))
create table Evenement (idEvenement integer generated by default as identity (start with 1), date timestamp, etat_places integer not null, heure integer not null, lieu varchar(255), primary key (idEvenement))
create table Evenement_Personne (Evenement_idEvenement integer not null, lp_idPersonne integer not null)
create table Personne (idPersonne integer generated by default as identity (start with 1), chauff boolean not null, firstname varchar(255), name varchar(255), nb_places_dispos integer not null, primary key (idPersonne))
create table Voiture (idVoiture integer generated by default as identity (start with 1), nb_places_dispos integer not null, primary key (idVoiture))
alter table Evenement_Personne add constraint FK4708D52251470556 foreign key (Evenement_idEvenement) references Evenement
alter table Evenement_Personne add constraint FK4708D52299358C99 foreign key (lp_idPersonne) references Personne
INSERT INTO VOITURE VALUES(1,3)
INSERT INTO VOITURE VALUES(2,3)
INSERT INTO VOITURE VALUES(3,3)
INSERT INTO VOITURE VALUES(4,3)
INSERT INTO VOITURE VALUES(5,3)
INSERT INTO EVENEMENT VALUES(1,'2014-12-09 20:30:45.946000',0,12,'Rennes')
INSERT INTO EVENEMENT VALUES(2,'2014-12-09 20:30:45.956000',0,12,'Rennes')
INSERT INTO EVENEMENT VALUES(3,'2014-12-09 20:30:45.957000',0,12,'Rennes')
INSERT INTO EVENEMENT VALUES(4,'2014-12-09 20:30:45.959000',0,12,'Rennes')
INSERT INTO EVENEMENT VALUES(5,'2014-12-09 20:30:45.960000',0,12,'Rennes')
INSERT INTO PERSONNE VALUES(1,TRUE,'Martin','Michel',0)
INSERT INTO PERSONNE VALUES(2,TRUE,'Martin','Michel',0)
INSERT INTO PERSONNE VALUES(3,TRUE,'Martin','Michel',0)
INSERT INTO PERSONNE VALUES(4,TRUE,'Martin','Michel',0)
INSERT INTO PERSONNE VALUES(5,TRUE,'Martin','Michel',0)
COMMIT
INSERT INTO PERSONNE VALUES(6,TRUE,'Pierre','Renard',6)
COMMIT
INSERT INTO EVENEMENT VALUES(6,'2014-12-10 01:00:00.000000',0,12,'Nantes')
COMMIT
DELETE FROM PERSONNE WHERE IDPERSONNE=4
INSERT INTO PERSONNE VALUES(4,FALSE,'Martin','Michel',0)
COMMIT
DELETE FROM EVENEMENT WHERE IDEVENEMENT=6
INSERT INTO EVENEMENT VALUES(6,'2014-12-10 01:00:00.000000',-1,12,'Nantes')
INSERT INTO EVENEMENT_PERSONNE VALUES(6,4)
COMMIT
DELETE FROM EVENEMENT WHERE IDEVENEMENT=6
INSERT INTO EVENEMENT VALUES(6,'2014-12-10 01:00:00.000000',4,12,'Nantes')
DELETE FROM EVENEMENT_PERSONNE WHERE EVENEMENT_IDEVENEMENT=6 AND LP_IDPERSONNE=4
INSERT INTO EVENEMENT_PERSONNE VALUES(6,4)
INSERT INTO EVENEMENT_PERSONNE VALUES(6,6)
COMMIT
INSERT INTO EVENEMENT VALUES(7,'2015-02-06 01:00:00.000000',0,7,'Barcelone')
COMMIT
DELETE FROM EVENEMENT WHERE IDEVENEMENT=7
INSERT INTO EVENEMENT VALUES(7,'2015-02-06 01:00:00.000000',-1,7,'Barcelone')
INSERT INTO EVENEMENT_PERSONNE VALUES(7,4)
COMMIT
DISCONNECT
